<!DOCTYPE html>
<html>
  
 <head>
 
   <title>Are They Vegan Friendly?</title>

  <!-- Load Leaflet code library: see http://leafletjs.com/download.html -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
  
   <!-- load legend css -->
  <script src="legend.css"></script>

  
  <!-- Position the map and title with Cascading Style Sheet (CSS) -->  
  <style>
  
    body { margin:0; padding:0; }
    #map { position: absolute; top:0; bottom:0; right:0; left:0; }
    #map-title { position: relative; margin-top: 10px; margin-left: 25%; float: left; background: white; border: 2px solid rgba(0,0,0,0.2); padding: 6px 8px; font-family: Helvetica; font-weight: bold; font-size: 1.2rem; z-index: 800; }    
    
  </style>
   
  <input type="checkbox" class="checkbox" onclick="showMarkers(this.value, this.checked)" value="Chai Me" checked>
   
  </head>
 
 <body>

    <!-- Display title with HTML division tags  -->
    <div id="map-title">Are They Vegan<br>Friendly?</div>
   
    <!-- display map -->
    <div id="map"></div>

    <!-- Create the interactive map content with JavaScript (.js) -->
  <script>
    
    // Initialize the map and set the view
    var map = L.map('map').setView([-33.8688, 151.2093], 13);
    
    // making the tile map into a variable containing the layer for later use in the control layer panel
    var mapLayerSatellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
    });
    
    var mapLayerMinimal = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://osm.org/copyright">\
      OpenStreetMap</a> contributors, &copy;\
      <a href="https://carto.com/attribution">CARTO</a>'
    });
    
    // adds map layers into the actual map
    mapLayerMinimal.addTo(map);
    mapLayerSatellite.addTo(map);

    // custom Icons
    var GreenIcon = L.icon({
      iconUrl: 'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z" fill="rgb(86,113,90)"></path></svg>',
      iconSize: [30, 30],
      iconAnchor: [12.5, 41],
      popupAnchor: [0, -41]
     })

    var RedIcon = L.icon({
      iconUrl: 'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z" fill="rgb(214,50,50)"></path></svg>',
      iconSize: [30, 30],
      iconAnchor: [12.5, 41],
      popupAnchor: [0, -41]
     })


    var YellowIcon = L.icon({
      iconUrl: 'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z" fill="rgb(241,194,50)"></path></svg>',
      iconSize: [30, 30],
      iconAnchor: [12.5, 41],
      popupAnchor: [0, -41]
     })

    
    // an array of coordinates for CHAI ME
    var coordinatesChaiMe = [
      {lat: -33.882948709789, lng: 151.1914159115681, title: "Sapphos", Soy: "", Oat: "Alt Dairy Co", Almond: "", Date: "Nov 2022"},
      {lat: -33.887869824610696, lng: 151.21438351549025, title: "Bourke St Surry Hills", Soy: "Bonsoy", Oat: "Alt Dairy Co", Almond: "", Date: "Nov 2022"},
      {lat: -33.86435381387368, lng: 151.20142669807498, title: "Bourke St Barangaroo", Soy: "", Oat: "", Almond: "", Date: "Nov 2022"}
    ];
    
    
    // an array of coordinates for VEGAN CHAI
    var coordinatesVeganChai = [
      {lat: -33.88226770573398, lng: 151.19015070768268, title: "Oh My Days", Soy: "", Oat: "", Almond: "", Date: "Nov 2022"},
      {lat: -33.88360595953672, lng: 151.19162860482174, title: "Lilypad Sydney", Soy: "", Oat: "", Almond: "", Date: "Nov 2022"},
      {lat: -33.868925740936255, lng: 151.20771357624943, title: "Romolo Pitt St", Soy: "", Oat: "", Almond: "", Date: "Nov 2022"}
    ];
    
    // an array of coordiantes for NOT ETHICAL 
    var coordinatesNotEthical = [
      {lat: -32.88226770573398, lng: 151.19015070768268, title: "Oh My Days", Soy: "", Oat: "", Almond: "", Date: "Nov 2022"},
    ];
    
    //greates objects with empty layer groups - so be later filled with the individual markers of their respective category.
    var markerChaiMeGroup = L.layerGroup();
    var markerVeganGroup = L.layerGroup();
    var markerNotEthicalGroup = L.layerGroup();

    //loop through coordinates and add markers for CHAI ME markers
    for (var i = 0; i < coordinatesChaiMe.length; i++) {
        // creates a new marker for every item in the array
        var markerChaiMe = new L.marker([coordinatesChaiMe[i].lat, coordinatesChaiMe[i].lng],{icon: YellowIcon}).addTo(map);
        // creates a popup with the appropriate info that appears when the respective marker is clicked
        markerChaiMe.bindPopup(
          "<h3><b>" + coordinatesChaiMe[i].title + "</b></h3>" + "<b>Soy:</b> " + coordinatesChaiMe[i].Soy + "<br>" + "<b>Oat:</b> " + coordinatesChaiMe[i].Oat + "<br>" + "<b>Almond:</b> " + coordinatesChaiMe[i].Almond + "<br><br>" + "<b>Date last confirmed:</b> " + coordinatesChaiMe[i].Date);
        // after it makes the marker for each cafe, it then adds it to the respective layer group object
        markerChaiMeGroup.addLayer(markerChaiMe);
    }

    //loop through coordinates and add markers for VEGAN markers
    for (var i = 0; i < coordinatesVeganChai.length; i++) {
      var markerVeganChai = new L.marker([coordinatesVeganChai[i].lat, coordinatesVeganChai[i].lng], {icon: GreenIcon}).addTo(map);
      markerVeganChai.bindPopup(
        "<h3><b>" + coordinatesVeganChai[i].title + "</b></h3>" + "<b>Soy:</b> " + coordinatesVeganChai[i].Soy + "<br>" + "<b>Oat:</b> " + coordinatesVeganChai[i].Oat + "<br>" + "<b>Almond:</b> " + coordinatesVeganChai[i].Almond + "<br><br>" + "<b>Date last confirmed:</b> " + coordinatesVeganChai[i].Date);
        // after it makes the marker for each cafe, it then adds it to the respective layer group object
        markerVeganGroup.addLayer(markerVeganChai);
    }

    //loop through coordinates and add markers for NOT ETHICAL markers
    for (var i = 0; i < coordinatesNotEthical.length; i++) {
      var markerNotEthical = new L.marker([coordinatesNotEthical[i].lat, coordinatesNotEthical[i].lng], {icon: RedIcon}).addTo(map);
      markerNotEthical.bindPopup(
        "<h3><b>" + coordinatesNotEthical[i].title + "</b></h3>" + "<b>Soy:</b> " + coordinatesNotEthical[i].Soy + "<br>" + "<b>Oat:</b> " + coordinatesNotEthical[i].Oat + "<br>" + "<b>Almond:</b> " + coordinatesNotEthical[i].Almond + "<br><br>" + "<b>Date last confirmed:</b> " + coordinatesNotEthical[i].Date);
        // after it makes the marker for each cafe, it then adds it to the respective layer group object
        markerNotEthicalGroup.addLayer(markerNotEthical);
    }
    
    // Makes a layer control feature
      // creates a base layer object
    var baseLayers = {
      "Map" : mapLayerMinimal,
      "Satellite" : mapLayerSatellite
    }

    // creates an overlay object
    var overlays = {
      "Chai Me" : markerChaiMeGroup,
      "Vegan" : markerVeganGroup,
      "Not Friendly" : markerNotEthicalGroup
    }


    // add the layer control to the map where you can toggle the markers on or off
    L.control.layers(baseLayers, overlays, {collapsed: false}).addTo(map);
    
    // ticks the checkboxes after the control is loaded
    setTimeout(function(){
    var checkboxes = document.querySelectorAll('.leaflet-control-layers-selector');
        for(var i = 0; i < checkboxes.length; i++) {
            checkboxes[i].click();
        }
    }, 0);

  </script>
 </body>
</html>
